{"version":3,"sources":["webpack:///./tab-utils/ads/Products/ProductsView.tsx","webpack:///./tab-utils/views/common/tracker.ts","webpack:///./logo.svg","webpack:///./tab_app_info.js","webpack:///./tab-utils/_render/browser/domRender.js","webpack:///./tab-utils/pretty_scroll_area.js","webpack:///./tab-utils/load_ad.js","webpack:///./tab-utils/utils/TabUserId.ts","webpack:///./tab-utils/utils/get_browser_info.ts","webpack:///./tab-utils/store.ts","webpack:///./tab-utils/views/Header/index.js","webpack:///./tab-utils/private/remove_hash.js","webpack:///./tab-utils/views/Footer/index.js","webpack:///./tab-utils/sleep.ts","webpack:///./tab-utils/utils/disable_problematic_users.ts","webpack:///./tab-utils/views/common/activate_email_links.js","webpack:///./tab-utils/views/common/activate_app.js","webpack:///./tab-utils/views/common/init_wake_lock.js","webpack:///./tab-utils/views/common/load_common.js","webpack:///./tab-utils/utils/get_deploy_id.ts"],"names":["ProductsView","_ref","ad_slots","product_slots","createElement","id","style","display","className","map","product_info","ProductView","_ref2","product_link","product_text","product_name","amazon_banner","width","paddingLeft","minHeight","height","alignItems","justifyContent","backgroundColor","dangerouslySetInnerHTML","__html","href","target","enable_products_view","products_section","document","querySelector","onclick","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","Promise","then","_asyncToGenerator","fn","self","this","args","tracked_errors","IS_DEV","window","location","hostname","track_error","_x","_track_error","regeneratorRuntime","mark","_callee5","_ref8","name","_eventCategory","third_party_origin","stack_info","wrap","_context5","prev","includes","abrupt","console","message","is_third_party_error","startsWith","endsWith","get_stack_info","sent","track_event","data","alert","stack__source_mapped","stop","_x2","_get_stack_info","_callee6","_context6","no_error_object","stack","stack__processed","no_error_stack","err_obj","JSON","stringify","getOwnPropertyNames","get_source_mapped_stack","stack__original","browser_name","toLowerCase","is_browser_extension_error","stack_lines","get_stack_lines","stack_line_1","stack_line_2","_window$location","origin","pathname","html_url","trim","is_from_inline_js","is_cross_origin_error","is_whitelist_error","no_stack_trace","split","Boolean","_ref$data","_ref$nonInteraction","nonInteraction","eventLabel__obj","tab_user_id","url","browser","screen","innerWidth","innerHeight","availWidth","availHeight","time","d","utc","toFormat","DATE_FORMAT","get_time_string","deploy_id","enhance_data","eventLabel","entries","_ref3","val","constructor","String","join","serialize_data","eventCategory","eventAction","ga","hitType","track_err_event","_x3","_x4","_track_err_event","_callee7","eventSource","_context7","_x7","_x8","_get_source_mapped_stack","_callee8","stack_trace","err_copy","stackframes","stringifiedStack","_context8","Error","fromError","t0","sf","infinite_loop_cacher","_ref7","_callee4","_args4","_context4","q","l","Date","ga_id","setup_ga","addEventListener","ev","target_tagName","tagName","target_id","target_class","getAttribute","target_href","target_src","src","target_value","target_textContent","textContent","slice","click_name","el","parentNode","get_click_name","passive","onerror","_ref4","_callee","_len","args_list","_key","filename","lineno","colno","_args","_context","load_google_analytics","noErrorObj","_ref5","_callee2","_context2","preventDefault","assign","_x5","useCapture","_ref6","_callee3","_context3","reason","_x6","store_listener","localstorage__keys","localStorage","store_dump","backup__dump","readable","add_store_change_listener","track_session_duration","minutes_so_far","minutes_until_next_track_event","Number","isInteger","ONE_MINUTE","setTimeout","visited_days","get_val","today_string","get_date_string","set_val","is_passive","prettify_number_of_visits","last_24_hours_visits","get_last_24_hours_visits","init","already_loaded","n","get_number_of_visits_in_the_last_24_hours","every","v","in_24_hours_ago","getTime","visit","scriptEl","async","getElementsByTagName","appendChild","module","exports","mail_user","at","mail","tab_app_name","tab_app_url","tab_app_source_code","tab_app_mail","fromCharCode","assert","tab_app_logo","logoUrl","tab_app_google_analytics_id","tab_app_google_analytics_id_2","tab_app_header_links","link_url","link_name","link_target","TabAppRoadmap","goldpage_args","init_tab_user_id","page","on_page_load","on_error","domRender","pretty_scroll_area","scroll_el","hide_scroll_state","is_on_hide_scroll_element","enable_scroll_auto_hide","scrollbar_width_computed","onStateChange","hide_scroll","classList","initialized","s1","querySelectorAll","s2","s3","usage","scroll_bar_width","hide_scroll_element","outer","position","visibility","zIndex","overflow","container","body","inner","scrollbarWidth","offsetWidth","removeChild","get_scroll_bar_width","documentElement","setProperty","addScrollListener","scroll_pos","hide_scroll_element_pos","get_element_scroll_pos","fireInitialScroll","isAutoScrolling","scrollListeners","scrollListener","onlyUserScroll","add_global_scroll_listener","getScroll","already_listening","is_user_scroll","on_resize","scrollToHideScrollElement","smooth","scrollTop","setScroll","newTop","jumpTo","slideTo","top","smoothStep","promise","resolvePromise","currentTop","distance","counter","timer","setInterval","clearInterval","requestAnimationFrame","scrollToElement","selector_or_element","getBoundingClientRect","adsense_code_load_promise","_user_donated","_ad_blocker_is_installed","Ad_left","slot_id","get_adsense_slot_id","adsense_ad","AdSenseAd","AdHeader","AdRemovalButton","marginTop","fontWeight","color","fontSize","props","click-name","Ad_ATF","AdView","slot_name","Ad_BTF","responsive_width","data-ad-client","data-full-width-responsive","data-ad-slot","adsense_slots","get_adsense_slots","slot","AD_SLOTS","filter_slots","is_adsense","get_product_slots","is_product","is_custom","res","load_ads","dont_show_adsense","load_and_show_adsense","success","dont_show_custom","load_custom_banner","custom_slot","slots__match","get_custom_slot","left_slot","add","vertical_slot_wrapper","img_src","innerHTML","show_ads","load_adsense_code","adsbygoogle","onload","already_resolved","_resolve","add_addendum","user_donated","is_nodejs","code_in_storage","store","has_val","hash","remove_hash","check_donation","is_small_screen","ad_blocker_detected","ad_blocked","is_fringe_browser","is_too_many_visits","no_adsense_slots","disable_reason","get_browser_name","get_screen_size","app_is_disabled","ad_blocker_test","pointerEvents","offsetHeight","get_tab_user_id","nanoid","get_browser_info","spec","get_system_spec","os_version","os","versionName","version","browser_info","parse","navigator","userAgent","_defineProperties","descriptor","_classPrivateFieldLooseBase","receiver","privateKey","hasOwnProperty","_classPrivateFieldLooseKey","KeyValueStore","instance","Constructor","_classCallCheck","_listeners","_store_data","protoProps","staticProps","assert_key","ensure_store","make_copy","_ref$is_passive","save_store","listener","_ref2$is_passive","key_rename_map","key__renamed","schema_version","_ref3$readable","data_string","get_storage_data_string","serialize","deserialize","log","set_storage_data_string","setItem","store__data_string","getItem","store__data","load_store","_ref4$readable","str","a","assert_todo","is_referenced_value","Logo","Link","Header","idx","history","pushState","title","search","Container","children","Section","marginBottom","textDecoration","Footer","sleep","seconds","milliseconds","disable_problematic_users","del_val","kill_app","_set_disable_flag","set_disable_flag","TARGET_PAGE","activate_email_links","from","link","setAttribute","data_subject","data_body","encodeURIComponent","getHref","activate_app","remove","init_wake_lock","call_wake_lock","visibilityState","wakeLock","request","load_common","e","get_deploy_id"],"mappings":"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","file":"tab-utils/views/ConductPage/index.page.js~tab-utils/views/DonatePage/index.page.js~tab-utils/views/M~a11bad6d.hash_805ec924f19e8698bbc2.js","sourcesContent":["\"use strict\";\n\nimport \"./ProductsView.css\";\nimport React from \"react\";\nimport { scrollToElement } from \"../../../tab-utils/pretty_scroll_area\";\nimport { get_product_slots } from \"../../load_ad\";\nexport { enable_products_view };\nexport { ProductsView };\n\nfunction ProductsView(_ref) {\n  var ad_slots = _ref.ad_slots;\n  var product_slots = get_product_slots(ad_slots);\n  return React.createElement(\"div\", {\n    id: \"products-section\",\n    style: {\n      display: \"none\"\n    },\n    className: \"more_panel_block\"\n  }, React.createElement(\"div\", {\n    className: \"more_panel_block_title\"\n  }, \"Products\"), React.createElement(\"div\", {\n    id: \"product-list\"\n  }, product_slots.map(function (product_info) {\n    return React.createElement(ProductView, product_info);\n  })));\n}\n\nfunction ProductView(_ref2) {\n  var product_link = _ref2.product_link,\n      product_text = _ref2.product_text,\n      product_name = _ref2.product_name,\n      amazon_banner = _ref2.amazon_banner;\n  return React.createElement(\"div\", {\n    \"click-name\": product_name,\n    style: {\n      width: 250\n    }\n  }, React.createElement(\"div\", null, React.createElement(\"ul\", {\n    style: {\n      paddingLeft: 20,\n      minHeight: 54\n    }\n  }, React.createElement(\"li\", null, product_text))), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      height: 254,\n      width: 250,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      backgroundColor: \"white\"\n    },\n    dangerouslySetInnerHTML: {\n      __html: amazon_banner\n    }\n  }), React.createElement(\"a\", {\n    className: \"product-link\",\n    href: product_link,\n    target: \"_blank\"\n  }));\n}\n\nfunction enable_products_view() {\n  var products_section = document.querySelector(\"#products-section\");\n  products_section.style.display = \"\";\n\n  document.querySelector(\"#custom-banner\").onclick = function () {\n    scrollToElement(products_section);\n  };\n}","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport assert from \"@brillout/assert\";\nimport { tab_app_google_analytics_id } from \"../../../tab_app_info\";\nimport StackTrace from \"stacktrace-js\";\nimport { DateTime } from \"luxon\";\nimport { get_tab_user_id } from \"../../utils/TabUserId\";\nimport { get_browser_info, get_browser_name } from \"../../utils/get_browser_info\";\nimport throttle from \"lodash.throttle\";\nimport { store } from \"../../store\";\nimport { get_deploy_id } from \"../../utils/get_deploy_id\";\nimport { app_is_disabled } from \"../../utils/disable_problematic_users\";\nexport { load_google_analytics };\nexport { track_event };\nexport { track_error };\nexport { track_dom_heart_beat_error };\nexport { get_number_of_visits_in_the_last_24_hours };\n//*/\nvar DEBUG = false;\n/*/\nconst DEBUG = true;\n//*/\n\nvar IS_DEV = typeof window !== \"undefined\" && window.location.hostname === \"localhost\";\nvar DATE_FORMAT = \"yyyy-LL-dd\";\ninit();\n\nfunction track_user_clicks() {\n  window.addEventListener(\"click\", function (ev) {\n    var target = ev.target;\n    var target_tagName = target.tagName;\n    var target_id = target.id;\n    var target_class = target.getAttribute(\"class\");\n    var target_href = target.href;\n    var target_src = target.src;\n    var target_value = target.value;\n    var target_textContent = target.textContent.slice(0, 100);\n    var click_name = get_click_name(target);\n    var value = target_id || target_class || target_href || target_src || target_value || target_textContent || target_tagName || \"null\";\n    var data = {\n      click_name: click_name,\n      target_id: target_id,\n      target_class: target_class,\n      target_href: target_href,\n      target_src: target_src,\n      target_value: target_value,\n      target_textContent: target_textContent,\n      target_tagName: target_tagName\n    };\n    var name = \"[click]\";\n    if (click_name) name += click_name;\n    track_event({\n      name: name,\n      value: value,\n      data: data\n    });\n  }, // Make sure that request to Google Analytics is sent before page navigates to advertisement\n  {\n    passive: false\n  });\n\n  function get_click_name(el) {\n    while (true) {\n      if (\"getAttribute\" in el) {\n        var click_name = el.getAttribute(\"click-name\");\n        if (click_name) return click_name;\n      }\n\n      el = el.parentNode;\n      if (!el) return null;\n    }\n  }\n}\n\nfunction track_page_view() {\n  !IS_DEV && window.ga(\"send\", \"pageview\");\n  track_event({\n    name: \"page_view\"\n  });\n  DEBUG && console.log(\"[GA] page view\");\n}\n\nvar tracked_errors;\n\nfunction track_error(_x) {\n  return _track_error.apply(this, arguments);\n}\n\nfunction _track_error() {\n  _track_error = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref8) {\n    var name, err, value, _eventCategory, third_party_origin, stack_info, data;\n\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            name = _ref8.name, err = _ref8.err, value = _ref8.value;\n            tracked_errors = tracked_errors || [];\n\n            if (!err) {\n              _context5.next = 6;\n              break;\n            }\n\n            if (!tracked_errors.includes(err)) {\n              _context5.next = 5;\n              break;\n            }\n\n            return _context5.abrupt(\"return\");\n\n          case 5:\n            tracked_errors.push(err);\n\n          case 6:\n            if (err) {\n              console.error(err);\n            } else {\n              console.error(name);\n            }\n\n            name = \"[error]\" + name;\n\n            if (!value) {\n              value = err && err.message || \"\";\n              {\n                third_party_origin = is_third_party_error(err);\n\n                if (third_party_origin) {\n                  _eventCategory = \"[third-party-error]\";\n                  assert(third_party_origin.startsWith(\"[\") && third_party_origin.endsWith(\"]\"));\n                  value = third_party_origin + value;\n                }\n              }\n            }\n\n            _context5.next = 11;\n            return get_stack_info(err);\n\n          case 11:\n            stack_info = _context5.sent;\n            data = stack_info;\n            track_event({\n              name: name,\n              value: value,\n              data: data,\n              _eventCategory: _eventCategory\n            });\n\n            if (IS_DEV) {\n              alert(name + \"\\n\" + stack_info.stack__source_mapped);\n            }\n\n          case 15:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _track_error.apply(this, arguments);\n}\n\nfunction get_stack_info(_x2) {\n  return _get_stack_info.apply(this, arguments);\n}\n\nfunction _get_stack_info() {\n  _get_stack_info = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(err) {\n    var stack_info;\n    return regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            stack_info = {};\n\n            if (err) {\n              _context6.next = 5;\n              break;\n            }\n\n            stack_info.no_error_object = true;\n            _context6.next = 15;\n            break;\n\n          case 5:\n            if (!(!err.stack && !err.stack__processed)) {\n              _context6.next = 10;\n              break;\n            }\n\n            stack_info.no_error_stack = true;\n            stack_info.err_obj = JSON.stringify(err, Object.getOwnPropertyNames(err));\n            _context6.next = 15;\n            break;\n\n          case 10:\n            _context6.next = 12;\n            return get_source_mapped_stack(err, err.stack__processed || err.stack);\n\n          case 12:\n            stack_info.stack__source_mapped = _context6.sent;\n\n            if (err.stack__original) {\n              stack_info.stack__original = err.stack__original;\n            }\n\n            stack_info.stack = err.stack;\n\n          case 15:\n            return _context6.abrupt(\"return\", stack_info);\n\n          case 16:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _get_stack_info.apply(this, arguments);\n}\n\nfunction is_third_party_error(err) {\n  if (is_browser_extension_error(err)) {\n    return \"[browser-extension]\";\n  } else if (is_from_inline_js(err)) {\n    return \"[inline-js]\";\n  } else if (is_cross_origin_error(err)) {\n    return \"[cross-origin]\";\n  } else if (is_whitelist_error(err)) {\n    return \"[whitelist]\";\n  } else if (no_stack_trace(err)) {\n    return \"[no-stack-trace]\";\n  }\n\n  return false;\n}\n\nfunction no_stack_trace(err) {\n  var stack_lines = get_stack_lines(err);\n  return stack_lines.length <= 1;\n}\n\nfunction is_cross_origin_error(err) {\n  if (!err) {\n    return false;\n  }\n\n  if (!err.stack && err.message === \"Script error.\") {\n    return true;\n  }\n\n  if (!err.stack && err.message === \"illegal character\") {\n    return true;\n  }\n\n  return false;\n}\n\nfunction is_from_inline_js(err) {\n  // The idea here is that errors from JavaScript inlined in HTML can't originate from app code,\n  // since my app code doesn't have any inline JS.\n  // Most likely it's JavaScript code injected by browser extensions.\n  if (!err) {\n    return false;\n  }\n\n  var stack_lines = get_stack_lines(err);\n\n  if (stack_lines.length > 2 || stack_lines.length === 0) {\n    return false;\n  }\n\n  assert(stack_lines.length === 1 || stack_lines.length === 2);\n  var stack_line_1 = stack_lines[0];\n  var stack_line_2 = stack_lines[1];\n  var _window$location = window.location,\n      origin = _window$location.origin,\n      pathname = _window$location.pathname;\n  assert(pathname.startsWith(\"/\"));\n  var html_url = origin + pathname; // Example:\n  // ~~~\n  // ReferenceError: SetEvent is not defined\n  //   at https://www.clocktab.com/:1:1\n  // ~~~\n\n  if (stack_line_2 && stack_line_2.trim().startsWith(\"at \" + html_url + \":\")) {\n    return true;\n  } // Example:\n  // ~~~\n  // TypeError: this.remove is not a function\n  //  at <anonymous>:12:14\n  // ~~~\n\n\n  if (stack_line_2 && stack_line_2.trim().startsWith(\"at <anonymous>:\")) {\n    return true;\n  } // Weird Firefox Error format, example:\n  // ~~~\n  // assert(err.message === 'can't redefine non-configurable property \"userAgent\"');\n  // assert(err.stack === '@https://www.clocktab.com/:1:635'):\n  // ~~~\n\n\n  if (!stack_line_2 && stack_line_1.startsWith(\"@\" + html_url + \":\")) {\n    return true;\n  }\n  /* I suspect that the following is already covered by the code block above.\n  // I'm not sure if this is really a cross origin error.\n  // Maybe it's a browser extension that erroneously loads HTML with a script tag.\n  if (\n    [\n      \"SyntaxError: Unexpected token '<'\",\n      \"SyntaxError: Unexpected token <\",\n    ].includes(err.stack)\n  ) {\n    return true;\n  }\n  */\n\n\n  return false;\n}\n\nfunction get_stack_lines(err) {\n  return (err.stack ? err.stack.split(\"\\n\") : []).filter(Boolean);\n}\n\nfunction is_browser_extension_error(err) {\n  if (!err || !err.stack || !err.stack.includes) {\n    return false;\n  }\n\n  var browser_name = get_browser_name();\n\n  if (!browser_name) {\n    return false;\n  } // I've seen such browser extension errors for Chrome and Safari but not for other browsers (yet?)\n\n\n  return err.stack.includes(browser_name.toLowerCase() + \"-extension://\");\n}\n\nfunction is_whitelist_error(err) {\n  if (!err) {\n    return false;\n  }\n\n  var browser_name = get_browser_name(); // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n\n  if (browser_name === \"Chrome\" && !err.stack && err.message === \"ResizeObserver loop limit exceeded\") {\n    return true;\n  }\n\n  return false;\n}\n\nfunction track_event(_ref) {\n  var name = _ref.name,\n      value = _ref.value,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? {} : _ref$data,\n      _eventCategory = _ref._eventCategory,\n      _ref$nonInteraction = _ref.nonInteraction,\n      nonInteraction = _ref$nonInteraction === void 0 ? true : _ref$nonInteraction;\n  var eventLabel__obj = enhance_data(data, name, value);\n  var eventLabel = serialize_data(eventLabel__obj);\n  assert(eventLabel.startsWith(\"time:\"));\n  var eventCategory = _eventCategory || name;\n  eventCategory = \"[\" + get_deploy_id() + \"]\" + eventCategory;\n  var eventAction = name;\n  if (value) eventAction += \" - \" + value;\n  var args = {\n    eventCategory: eventCategory,\n    eventAction: eventAction,\n    nonInteraction: nonInteraction\n  };\n  !IS_DEV && window.ga(\"send\", _objectSpread({\n    hitType: \"event\",\n    eventLabel: eventLabel\n  }, args));\n\n  if (DEBUG) {\n    console.log(\"[GA][event]\", eventAction, eventLabel__obj);\n  }\n}\n\nfunction enhance_data(data, name, value) {\n  var tab_user_id = get_tab_user_id();\n  var url = window.location.href;\n  var browser = get_browser_info();\n  var screen = get_window_screen_sizes();\n  var time = get_time_string();\n  var deploy_id = get_deploy_id();\n\n  var data_enhanced = _objectSpread({\n    time: time,\n    name: name\n  }, value ? {\n    value: value\n  } : {}, {}, data || {}, {\n    browser: browser,\n    tab_user_id: tab_user_id,\n    url: url,\n    screen: screen,\n    deploy_id: deploy_id\n  });\n\n  return data_enhanced;\n}\n\nfunction serialize_data(data) {\n  return Object.entries(data).map(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        val = _ref3[1];\n\n    // GA doesn't show new lines\n    if (val && val.constructor === String) {\n      val = val.split(\"\\n\").join(\"\\\\n\");\n    }\n\n    return key + \": \" + val;\n  }).join(\" ===== \");\n}\n\nfunction init() {\n  if (typeof window === \"undefined\") return;\n\n  if (app_is_disabled()) {\n    return;\n  }\n\n  setup_ga();\n  track_page_view();\n  track_user_clicks();\n  track_error_events();\n  track_storage();\n  track_session_duration();\n  {\n    var pathname = window.location.pathname;\n    assert(pathname.startsWith(\"/\"));\n\n    if (pathname === \"/\") {\n      track_visited_days();\n      track_last_24_hours_visits();\n    }\n  }\n}\n\nfunction setup_ga() {\n  // Source:\n  //  - https://developers.google.com/analytics/devguides/collection/analyticsjs/tracking-snippet-reference#async-unminified\n  window.ga = window.ga || function () {\n    (window.ga.q = window.ga.q || []).push(arguments);\n  }; // Sets the time (as an integer) this tag was executed.\n  // Used for timing hits.\n\n\n  window.ga.l = +new Date();\n  var ga_id = tab_app_google_analytics_id;\n  assert(ga_id && ga_id.startsWith(\"UA-\")); // Creates a default tracker with automatic cookie domain configuration.\n\n  !IS_DEV && window.ga(\"create\", ga_id, \"auto\");\n  DEBUG && console.log(\"[GA] Initialized with \" + ga_id);\n}\n\nfunction track_err_event(_x3, _x4) {\n  return _track_err_event.apply(this, arguments);\n} // https://stackoverflow.com/questions/12571650/catching-all-javascript-unhandled-exceptions/49560222#49560222\n\n\nfunction _track_err_event() {\n  _track_err_event = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(eventSource, err) {\n    return regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            if (err.stack__processed) {\n              eventSource = \"assert\";\n            }\n\n            _context7.next = 3;\n            return track_error({\n              name: \"[\" + eventSource + \"]\",\n              err: err\n            });\n\n          case 3:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _track_err_event.apply(this, arguments);\n}\n\nfunction track_error_events() {\n  window.onerror = infinite_loop_cacher( /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var _len,\n          args_list,\n          _key,\n          message,\n          filename,\n          lineno,\n          colno,\n          error,\n          err,\n          _args = arguments;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              load_google_analytics();\n\n              for (_len = _args.length, args_list = new Array(_len), _key = 0; _key < _len; _key++) {\n                args_list[_key] = _args[_key];\n              }\n\n              message = args_list[0], filename = args_list[1], lineno = args_list[2], colno = args_list[3], error = args_list[4];\n\n              if (error) {\n                err = error;\n              } else {\n                err = {\n                  message: message,\n                  filename: filename,\n                  lineno: lineno,\n                  colno: colno,\n                  noErrorObj: true\n                };\n              }\n\n              _context.next = 6;\n              return track_err_event(\"window.onerror\", err);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function () {\n      return _ref4.apply(this, arguments);\n    };\n  }());\n  window.addEventListener(\"error\", infinite_loop_cacher( /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(ev) {\n      var err, filename, lineno, colno;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              ev.preventDefault();\n              load_google_analytics();\n              err = ev.error || {};\n              err.message = err.message || ev.message;\n\n              if (!err.stack) {\n                filename = ev.filename, lineno = ev.lineno, colno = ev.colno;\n                Object.assign(err, {\n                  filename: filename,\n                  lineno: lineno,\n                  colno: colno,\n                  noErrorObj: true\n                });\n              }\n\n              _context2.next = 7;\n              return track_err_event(\"ErrorEvent\", err);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }()), // @ts-ignore\n  {\n    useCapture: true,\n    passive: false\n  });\n  window.addEventListener(\"unhandledrejection\", infinite_loop_cacher( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(ev) {\n      var err;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              load_google_analytics();\n              err = ev.reason;\n              _context3.next = 4;\n              return track_err_event(\"unhandledrejection\", err);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }()));\n}\n\nfunction load_script(url) {\n  var scriptEl = document.createElement(\"script\");\n  scriptEl.src = url;\n  scriptEl.async = true;\n  document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\n  return scriptEl;\n}\n\nfunction get_source_mapped_stack(_x7, _x8) {\n  return _get_source_mapped_stack.apply(this, arguments);\n}\n\nfunction _get_source_mapped_stack() {\n  _get_source_mapped_stack = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(err, stack_trace) {\n    var err_copy, stackframes, stringifiedStack;\n    return regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            err_copy = new Error(err.message);\n            err_copy.stack = stack_trace;\n            _context8.prev = 2;\n            _context8.next = 5;\n            return StackTrace.fromError(err_copy);\n\n          case 5:\n            stackframes = _context8.sent;\n            _context8.next = 11;\n            break;\n\n          case 8:\n            _context8.prev = 8;\n            _context8.t0 = _context8[\"catch\"](2);\n            return _context8.abrupt(\"return\", \"[Failed applying source map to error stack trace] \" + _context8.t0.message);\n\n          case 11:\n            stringifiedStack = stackframes.map(function (sf) {\n              return sf.toString();\n            }).join(\"\\n\");\n            return _context8.abrupt(\"return\", \"[Error: \" + err.message + \"]\\n\" + stringifiedStack);\n\n          case 13:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[2, 8]]);\n  }));\n  return _get_source_mapped_stack.apply(this, arguments);\n}\n\nfunction infinite_loop_cacher(fn) {\n  return (/*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _args4 = arguments;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return fn.apply(void 0, _args4);\n\n              case 3:\n                _context4.next = 10;\n                break;\n\n              case 5:\n                _context4.prev = 5;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                if (IS_DEV) {\n                  alert(\"[infinite-loop-catcher]\\n\" + _context4.t0.stack);\n                }\n\n                console && console.error && console.error(_context4.t0); // for window.onerror\n\n                return _context4.abrupt(\"return\", true);\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 5]]);\n      }));\n\n      return function () {\n        return _ref7.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction get_window_screen_sizes() {\n  return window.innerWidth + \"x\" + window.innerHeight + \" / \" + window.screen.availWidth + \"x\" + window.screen.availHeight + \" / \" + window.screen.width + \"x\" + window.screen.height;\n}\n\nfunction track_storage() {\n  var store_listener = throttle(function (key, val) {\n    track_event({\n      name: \"storage_change\",\n      value: \"[\" + key + \"]: \" + val,\n      data: {\n        localstorage__keys: Object.keys(window.localStorage),\n        store_dump: store.backup__dump({\n          readable: true\n        })\n      }\n    });\n  }, 2 * 1000);\n  store.add_store_change_listener(store_listener);\n  /*\n  const originalSetItem = localStorage.setItem;\n  localStorage.setItem = function (key, val) {\n    originalSetItem.apply(this, arguments);\n    on_local_storage_mod(key, val);\n  };\n   function getSettings() {\n    const settings__string = store.backup__dump({ readable: true });\n    const local_storage_keys = JSON.stringify(Object.keys(window.localStorage));\n    return { settings__string, local_storage_keys };\n  }\n  */\n}\n\nvar dom_heart_beat_error_already_catched = false;\n\nfunction track_dom_heart_beat_error(dom_heart_beat) {\n  try {\n    dom_heart_beat();\n  } catch (err) {\n    if (dom_heart_beat_error_already_catched === false) {\n      dom_heart_beat_error_already_catched = true;\n      track_error({\n        name: \"[dom_heart_beat]\",\n        err: err\n      });\n    } // We don't re-throw the error in order to not block future dom beats\n\n\n    console.error(err);\n  }\n}\n\nfunction track_visited_days() {\n  var FIVE_MINUTES = 5 * 60 * 1000;\n  setTimeout(track_visit, FIVE_MINUTES);\n\n  function track_visit() {\n    var VISITED_DAYS = \"visited_days\";\n    var visited_days = store.get_val(VISITED_DAYS) || [];\n    var today_string = get_date_string();\n\n    if (!today_string) {\n      return;\n    }\n\n    if (visited_days.includes(today_string)) {\n      return;\n    }\n\n    visited_days.push(today_string);\n    store.set_val(VISITED_DAYS, visited_days, {\n      is_passive: true\n    });\n    track_event({\n      name: \"[visitors][\" + today_string + \"]\",\n      value: \"visited days: \" + prettify_number_of_visits(visited_days.length)\n    });\n  }\n}\n\nfunction prettify_number_of_visits(n) {\n  return n < 10 && n + \"\" || (n / 10 | 0) + \"x\";\n}\n\nfunction track_session_duration() {\n  var minutes_so_far = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var minutes_until_next_track_event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  assert([0, 5, 10, 20, 30, 40, 50, 60, 2 * 60, 3 * 60].includes(minutes_so_far) || minutes_so_far > 3 * 60 && Number.isInteger(minutes_so_far / 60), {\n    minutes_so_far: minutes_so_far\n  });\n  var ONE_MINUTE = 60 * 1000;\n  setTimeout(function () {\n    minutes_so_far = minutes_so_far + minutes_until_next_track_event;\n    track_event({\n      name: \"[session-duration]\",\n      value: minutes_so_far.toString(),\n      nonInteraction: false\n    });\n    track_session_duration(minutes_so_far, minutes_so_far === 5 && 5 || minutes_so_far < 60 && 10 || 60);\n  }, minutes_until_next_track_event * ONE_MINUTE);\n}\n\nfunction track_last_24_hours_visits() {\n  var last_24_hours_visits = get_last_24_hours_visits();\n  last_24_hours_visits.push(new Date());\n  store.set_val(LAST_24_HOURS_VISITS(), last_24_hours_visits, {\n    is_passive: true\n  });\n  track_event({\n    name: \"number_of_visits\",\n    value: prettify_number_of_visits(last_24_hours_visits.length)\n  });\n}\n\nfunction get_number_of_visits_in_the_last_24_hours() {\n  var last_24_hours_visits = get_last_24_hours_visits();\n  return last_24_hours_visits.length;\n}\n\nfunction get_last_24_hours_visits() {\n  var last_24_hours_visits = store.get_val(LAST_24_HOURS_VISITS()) || [];\n  assert(last_24_hours_visits.constructor === Array && last_24_hours_visits.every(function (v) {\n    return v && v.constructor === Date;\n  }), {\n    last_24_hours_visits: last_24_hours_visits\n  });\n  {\n    var in_24_hours_ago = new Date().getTime() - 24 * 60 * 60 * 1000;\n    last_24_hours_visits = last_24_hours_visits.filter(function (visit) {\n      return visit.getTime() > in_24_hours_ago;\n    });\n  }\n  return last_24_hours_visits;\n}\n\nfunction LAST_24_HOURS_VISITS() {\n  // `\"user_visits\"` is a legacy name\n  return \"user_visits\";\n}\n\nfunction get_time_string() {\n  try {\n    var d = DateTime.utc();\n    var TIME_FORMAT = \"HH:mm:ss\";\n    var time_string = d.toFormat(DATE_FORMAT + \"_\" + TIME_FORMAT);\n    return time_string;\n  } catch (err) {\n    return \"BUG_NO_INTL_SUPPORT\";\n  }\n}\n\nfunction get_date_string() {\n  try {\n    var d = DateTime.utc();\n    var date_string = d.toFormat(DATE_FORMAT);\n    return date_string;\n  } catch (err) {\n    return null;\n  }\n}\n\nvar already_loaded;\n\nfunction load_google_analytics() {\n  if (already_loaded) return;\n  already_loaded = true;\n  load_script(\"//www.google-analytics.com/analytics.js\");\n  DEBUG && console.log(\"[GA] ga code loaded\");\n}","module.exports = __webpack_public_path__ + \"logo.hash_7d1c5dfedeafd98c9e0ae3f9f84230ab.svg\";","import logoUrl from \"./logo.svg\";\nimport assert from \"@brillout/assert\";\n\nimport React from \"react\";\n\nexport const tab_app_name = \"Timer Tab\";\nexport const tab_app_url = \"https://www.timer-tab.com\";\nexport const tab_app_source_code = \"https://github.com/brillout/timer-tab\";\nexport const tab_app_mail = compute_mail(\"timertab\");\nexport const tab_app_logo = logoUrl;\nexport const tab_app_google_analytics_id = \"UA-5263303-6\";\nexport const tab_app_google_analytics_id_2 = \"a5263303w24659437p23108626\";\nexport const tab_app_header_links = [\n  /*\n  { link_url: \"/history\", link_name: \"History\" },\n  */\n  {\n    link_url: \"https://www.clocktab.com\",\n    link_name: \"Clock Tab\",\n    link_target: \"_blank\",\n  },\n];\nexport const TabAppRoadmap = () => (\n  <>\n    <li>Time Tracker app.</li>\n    <li>Pomodoro Timer app.</li>\n    <li>Support multiple timers.</li>\n    <li>Timer history.</li>\n    <li>Improved load performance.</li>\n    <li>Offline support.</li>\n  </>\n);\n\nfunction compute_mail(mail_user) {\n  const at = String.fromCharCode(2 * 32);\n  // fuck-spam-crawlers@brillout.com\n  const mail = mail_user + at + \"brillout\" + \".\" + \"com\";\n  assert(at === \"@\");\n  return mail;\n}\n","import \"./css/common.css\";\nimport { load_google_analytics, track_error } from \"../../views/common/tracker\";\nimport { tab_app_name } from \"../../../tab_app_info\";\nimport { init_tab_user_id } from \"../../utils/TabUserId\";\n\nexport default domRender;\n\nasync function domRender(goldpage_args) {\n  try {\n    init_tab_user_id();\n    await goldpage_args.page.on_page_load(goldpage_args);\n  } catch (err) {\n    on_error(err);\n  }\n}\n\nconst IS_DEV =\n  typeof window !== \"undefined\" && window.location.hostname === \"localhost\";\nfunction on_error(err) {\n  load_google_analytics();\n  track_error({ name: \"init\", err });\n\n  // Timeout to ensure event tracking happened.\n  setTimeout(() => {\n    if (!IS_DEV) {\n      alert(\n        \"Something went wrong. Your \" +\n          tab_app_name +\n          ' seems to be broken; click on \"Bug Repair\" in the footer below to fix the problem.'\n      );\n    }\n  }, 2000);\n}\n","import \"./private/pretty_scroll_area.css\";\nimport assert from \"@brillout/assert\";\n\nexport default pretty_scroll_area;\n\nexport {\n  getScroll,\n  setScroll,\n  scrollToElement,\n  scrollToHideScrollElement,\n  /*\n  isScrolledToHideScrollElement,\n  */\n\n  addScrollListener,\n  removeScrollListener,\n};\n\n/*\nconst DISABLE = true;\n/*/\nconst DISABLE = false;\n//*/\n\nlet scroll_el;\n\nconst hide_scroll_state = {\n  is_on_hide_scroll_element: null,\n  enable_scroll_auto_hide: null,\n  scrollbar_width_computed: null,\n};\nfunction onStateChange() {\n  const hide_scroll =\n    hide_scroll_state.is_on_hide_scroll_element &&\n    hide_scroll_state.enable_scroll_auto_hide &&\n    hide_scroll_state.scrollbar_width_computed;\n  if (DISABLE) {\n    return;\n  }\n  scroll_el.classList[hide_scroll ? \"add\" : \"remove\"](\"hide_scroll\");\n}\n\nlet initialized = false;\nfunction pretty_scroll_area() {\n  if (initialized) return;\n  initialized = true;\n\n  const s1 = document.querySelectorAll(\".pretty_scroll_area\");\n  const s2 = document.querySelectorAll(\".pretty_scroll_area__parent\");\n  const s3 = document.querySelectorAll(\n    \".pretty_scroll_area__hide_scroll_element\"\n  );\n  assert.usage(s1.length === 1 && s2.length === 1 && s3.length === 1);\n  scroll_el = s1[0];\n  const hide_scroll_element = s3[0];\n\n  compute_scrollbar_width();\n  hide_scroll_state.scrollbar_width_computed = true;\n  onStateChange();\n\n  addScrollListener(\n    (scroll_pos) => {\n      const hide_scroll_element_pos = get_element_scroll_pos(\n        hide_scroll_element\n      );\n      // assert.log({hide_scroll_element_pos, scroll_pos});\n      hide_scroll_state.is_on_hide_scroll_element =\n        scroll_pos === hide_scroll_element_pos;\n      onStateChange();\n    },\n    { fireInitialScroll: true }\n  );\n\n  setTimeout(() => {\n    hide_scroll_state.enable_scroll_auto_hide = true;\n    onStateChange();\n  }, 2000);\n}\n\nconst scrollListeners = [];\nvar isAutoScrolling;\nfunction addScrollListener(\n  scrollListener,\n  { onlyUserScroll = false, fireInitialScroll = false } = {}\n) {\n  scrollListener.onlyUserScroll = onlyUserScroll;\n  scrollListeners.push(scrollListener);\n  add_global_scroll_listener();\n  if (fireInitialScroll) {\n    const scroll_pos = getScroll();\n    scrollListener(scroll_pos);\n  }\n}\nfunction removeScrollListener(scrollListener) {\n  const idx = scrollListeners.indexOf(scrollListener);\n  if (idx !== -1) {\n    scrollListeners.splice(idx, 1);\n  }\n}\nlet already_listening = false;\nfunction add_global_scroll_listener() {\n  if (already_listening) return;\n  pretty_scroll_area();\n  already_listening = true;\n  const scroll_event_el =\n    scroll_el === document.documentElement ? window : scroll_el;\n  scroll_event_el.addEventListener(\n    \"scroll\",\n    () => {\n      const scroll_pos = getScroll();\n      scrollListeners.forEach((scrollListener) => {\n        if (scrollListener.onlyUserScroll && isAutoScrolling) {\n          return;\n        }\n        scrollListener(scroll_pos, { is_user_scroll: !isAutoScrolling });\n      });\n    },\n    { passive: true }\n  );\n  window.addEventListener(\"resize\", on_resize, { passive: true });\n}\n\nfunction on_resize() {\n  scrollToHideScrollElement({ smooth: false });\n}\n\nfunction getScroll() {\n  return scroll_el.scrollTop;\n}\nasync function setScroll(newTop, { smooth = false } = {}) {\n  if (!smooth) {\n    return jumpTo(newTop);\n  } else {\n    return slideTo(newTop);\n  }\n}\n\nfunction jumpTo(newTop) {\n  scroll_el.scrollTop = newTop;\n}\n\nasync function slideTo(top) {\n  /*\n  const STEPS = 30;\n  const INTERVAL = 10;\n  /*/\n  const STEPS = 30;\n  const INTERVAL = 20;\n  //*/\n\n  let resolvePromise;\n  const promise = new Promise((resolve) => (resolvePromise = resolve));\n\n  const currentTop = getScroll();\n  const distance = top - currentTop;\n\n  isAutoScrolling = true;\n  let counter = 0;\n  var timer = setInterval(function () {\n    jumpTo(currentTop + distance * smoothStep(counter++ / STEPS));\n    if (counter > STEPS) {\n      clearInterval(timer);\n      window.requestAnimationFrame(() => {\n        isAutoScrolling = false;\n      });\n      resolvePromise();\n    }\n  }, INTERVAL);\n\n  return promise;\n\n  function smoothStep(n) {\n    return n * n * (3 - 2 * n);\n  }\n}\n\nfunction scrollToElement(selector_or_element, { smooth = true } = {}) {\n  const top = get_element_scroll_pos(selector_or_element);\n  return setScroll(top, { smooth });\n}\n\nfunction get_element_scroll_pos(selector_or_element) {\n  const element =\n    selector_or_element.constructor === String\n      ? document.querySelector(selector_or_element)\n      : selector_or_element;\n  const top = element.getBoundingClientRect().top + getScroll();\n  return top;\n}\n\nfunction scrollToHideScrollElement({ smooth = true } = {}) {\n  const s3 = document.querySelectorAll(\n    \".pretty_scroll_area__hide_scroll_element\"\n  );\n  assert.usage(\n    s3.length === 1,\n    \"Number of `.pretty_scroll_area__hide_scroll_element` elements: \" +\n      s3.length\n  );\n\n  const hide_scroll_element = s3[0];\n\n  scrollToElement(hide_scroll_element, { smooth });\n}\n/*\nfunction isScrolledToHideScrollElement() {\n  return !!hide_scroll_state.is_on_hide_scroll_element;\n}\n*/\n\nfunction compute_scrollbar_width() {\n  const scroll_bar_width = get_scroll_bar_width();\n  document.documentElement.style.setProperty(\n    \"--scroll-bar-width\",\n    scroll_bar_width + \"px\"\n  );\n}\nfunction get_scroll_bar_width() {\n  // Creating invisible container\n  const outer = document.createElement(\"div\");\n  hide_el(outer);\n  outer.style.overflow = \"scroll\"; // forcing scrollbar to appear\n  const container = document.body;\n\n  container.appendChild(outer);\n\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n\n  container.removeChild(outer);\n\n  return scrollbarWidth;\n\n  function hide_el(el) {\n    el.style.position = \"absolute\";\n    el.style.visibility = \"hidden\";\n    el.style.zIndex = \"-9999\";\n  }\n}\n","import \"./ad_layout.css\";\nimport \"./ad_layout_left.css\";\nimport React from \"react\";\nimport assert from \"@brillout/assert\";\nimport remove_hash from \"./private/remove_hash\";\nimport { store } from \"./store\";\nimport {\n  track_event,\n  get_number_of_visits_in_the_last_24_hours,\n} from \"./views/common/tracker\";\nimport { get_browser_name } from \"./utils/get_browser_info\";\nimport { enable_products_view } from \"./ads/Products/ProductsView\";\nimport { app_is_disabled } from \"./utils/disable_problematic_users\";\n\nexport { load_ads };\nexport { Ad_ATF, Ad_BTF };\nexport { Ad_left };\nexport { user_donated };\nexport { get_product_slots };\n\ninit();\n\nfunction init() {\n  if (is_nodejs()) {\n    return;\n  }\n  if (user_donated()) {\n    document.documentElement.classList.add(\"user-donated\");\n  }\n}\n\nfunction Ad_left({ ad_slots }) {\n  const slot_id = get_adsense_slot_id(\"LEFT_AD\", ad_slots);\n  const adsense_ad = slot_id === null ? null : <AdSenseAd slot_id={slot_id} />;\n  return (\n    <div id=\"left-slot\">\n      <AdHeader />\n      <div className=\"vertical-slot-wrapper\">{adsense_ad}</div>\n      <AdRemovalButton style={{ marginTop: 45 }} />\n    </div>\n  );\n}\n\nfunction AdHeader() {\n  return (\n    <div\n      style={{\n        height: 61,\n        fontWeight: 300,\n        width: \"100%\",\n        color: \"#aaa\",\n        fontSize: \"0.95em\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n      className=\"unselectable\"\n    >\n      Advertisement\n    </div>\n  );\n}\nfunction AdRemovalButton(props) {\n  return (\n    <a\n      className=\"donate-remover-2 glass-background\"\n      click-name=\"donate-button-left\"\n      href=\"/donate\"\n      target=\"_blank\"\n      {...props}\n    >\n      <span id=\"left-donate-icon\"></span>\n      <span id=\"left-donate-text\">\n        Donate &<br />\n        Remove ads\n      </span>\n    </a>\n  );\n}\n\nfunction Ad_ATF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"ATF\"} />;\n}\nfunction Ad_BTF({ ad_slots }) {\n  return <AdView ad_slots={ad_slots} slot_name={\"BTF\"} />;\n}\n\nfunction AdView({ ad_slots, slot_name }) {\n  assert([\"ATF\", \"BTF\"].includes(slot_name));\n  const slot_id = get_adsense_slot_id(slot_name, ad_slots);\n  if (slot_id === null) return null;\n  return (\n    <div className=\"a-wrap\">\n      <div className=\"horizontal-slot-wrapper\">\n        <AdSenseAd slot_id={slot_id} responsive_width={true} />\n      </div>\n      <a className=\"donate-remover\" href=\"donate\" target=\"_blank\">\n        Remove ad\n      </a>\n    </div>\n  );\n}\n\nfunction AdSenseAd({ slot_id, responsive_width = false }) {\n  return (\n    <ins\n      className=\"adsbygoogle\"\n      data-ad-client=\"ca-pub-6953474219479917\"\n      data-full-width-responsive={responsive_width ? \"true\" : null}\n      data-ad-slot={slot_id}\n    ></ins>\n  );\n}\n\nfunction get_adsense_slot_id(slot_name, ad_slots) {\n  const adsense_slots = get_adsense_slots(ad_slots).filter((slot) => {\n    assert(slot_name);\n    assert(slot.slot_name);\n    return slot.slot_name === slot_name;\n  });\n  assert(adsense_slots.length <= 1);\n  const slot = adsense_slots[0];\n  if (!slot) return null;\n  const { slot_id } = slot;\n  assert(slot_id);\n  return slot_id;\n}\n\nfunction get_adsense_slots(AD_SLOTS) {\n  return filter_slots(AD_SLOTS, (slot) => slot.is_adsense);\n}\nfunction get_product_slots(AD_SLOTS) {\n  const product_slots = filter_slots(AD_SLOTS, (slot) => slot.is_product);\n  return product_slots;\n}\nfunction get_custom_slot(AD_SLOTS) {\n  const slots__match = filter_slots(AD_SLOTS, (slot) => slot.is_custom);\n  if (slots__match.length === 0) {\n    return null;\n  }\n  assert(slots__match.length === 1);\n  const custom_slot = slots__match[0];\n  assert(custom_slot.is_custom === true);\n  return custom_slot;\n}\nfunction filter_slots(AD_SLOTS, fn) {\n  return AD_SLOTS.filter((slot) => {\n    assert([true, undefined].includes(slot.is_adsense));\n    assert([true, undefined].includes(slot.is_custom));\n    assert([true, undefined].includes(slot.is_product));\n    assert(\n      (slot.is_adsense ? 1 : 0) +\n        (slot.is_custom ? 1 : 0) +\n        (slot.is_product ? 1 : 0) ===\n        1\n    );\n    const res = fn(slot);\n    assert([true, undefined].includes(res));\n    return !!res;\n  });\n}\n\nasync function load_ads(AD_SLOTS) {\n  if (!(await dont_show_adsense(AD_SLOTS))) {\n    const success = await load_and_show_adsense(AD_SLOTS);\n    assert(success, { success });\n  }\n\n  if (!(await dont_show_custom())) {\n    load_custom_banner(AD_SLOTS);\n    return;\n  }\n}\n\nfunction load_custom_banner(AD_SLOTS) {\n  const custom_slot = get_custom_slot(AD_SLOTS);\n\n  if (custom_slot === null) {\n    return;\n  }\n\n  const left_slot = document.querySelector(\"#left-slot\");\n  assert(left_slot, \"couldn't find left_slot\");\n\n  left_slot.classList.add(\"custom-banner\");\n\n  const vertical_slot_wrapper = left_slot.querySelector(\n    \".vertical-slot-wrapper\"\n  );\n  assert(vertical_slot_wrapper, \"couldn't find vertical_slot_wrapper\");\n\n  const { img_src, click_name, slot_name, is_custom } = custom_slot;\n  assert(img_src);\n  assert(click_name === \"monitor_banner\");\n  assert(slot_name === \"LEFT_AD\");\n  assert(is_custom === true);\n\n  vertical_slot_wrapper.innerHTML = `\n    <img\n      click-name=\"${click_name}\"\n      src=\"${img_src}\"\n      id=\"custom-banner\"\n    />\n  `;\n\n  enable_products_view(custom_slot);\n\n  setTimeout(show_ads, 1000);\n\n  track_event({ name: \"[custom-ad] activated\" });\n}\n\nasync function load_and_show_adsense(AD_SLOTS) {\n  const adsense_slots = get_adsense_slots(AD_SLOTS);\n  assert(adsense_slots.length > 0);\n\n  const success = await load_adsense_code();\n  assert(success === true, { success });\n\n  window.adsbygoogle = window.adsbygoogle || [];\n  adsense_slots.forEach(() => {\n    window.adsbygoogle.push({});\n  });\n\n  track_event({ name: \"[adsense] activated\" });\n\n  show_ads();\n\n  return true;\n}\n\nvar adsense_code_load_promise;\nfunction load_adsense_code() {\n  if (adsense_code_load_promise !== undefined) return adsense_code_load_promise;\n  let resolve;\n  let already_resolved = false;\n  adsense_code_load_promise = new Promise((_resolve) => {\n    resolve = (success) => {\n      assert([true, false].includes(success));\n      if (already_resolved) return;\n      already_resolved = true;\n      _resolve(success);\n    };\n  });\n  assert(resolve);\n\n  load_script(\n    \"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\",\n    () => {\n      track_event({ name: \"[adsense] adsbygoogle.js loaded\" + add_addendum() });\n      resolve(true);\n    },\n    () => {\n      track_event({\n        name: \"[adsense] adsbygoogle.js blocked\" + add_addendum(),\n      });\n      resolve(false);\n    }\n  );\n  setTimeout(() => {\n    if (already_resolved) return;\n    track_event({ name: \"[adsense] adsbygoogle.js timeout\" });\n    resolve(false);\n  }, 5 * 1000);\n\n  return adsense_code_load_promise;\n\n  function add_addendum() {\n    const addendum = already_resolved ? \" [after-timeout]\" : \"\";\n    return addendum;\n  }\n}\n\n// Since Clock/Timer Tab's source code is open anyone can read this and bypass doing a donation to remove ads.\n// If you are short on money then you are more than welcome to do this :-).\nvar _user_donated;\nfunction user_donated() {\n  assert(!is_nodejs());\n\n  if (_user_donated !== undefined) {\n    assert([true, false].includes(_user_donated));\n    return _user_donated;\n  }\n\n  _user_donated = check_donation();\n  assert([true, false].includes(_user_donated));\n\n  return _user_donated;\n\n  function check_donation() {\n    const AD_REMOVAL_KEY = \"ad_removal\";\n\n    const code_in_storage = store.has_val(AD_REMOVAL_KEY);\n\n    if (window.location.hash === \"#thanks-for-your-donation\") {\n      if (!code_in_storage) {\n        store.set_val(AD_REMOVAL_KEY, true);\n      }\n      remove_hash();\n      return true;\n    }\n\n    if (code_in_storage) {\n      return true;\n    }\n\n    return false;\n  }\n}\n\nasync function dont_show_custom() {\n  return (\n    user_donated() ||\n    is_small_screen() ||\n    ad_blocker_detected() ||\n    (await ad_blocked())\n  );\n}\n\nasync function dont_show_adsense(AD_SLOTS) {\n  const disable_reason =\n    (user_donated() && \"user_has_donated\") ||\n    (ad_blocker_detected() && \"ad_blocker_detected\") ||\n    (is_small_screen() && \"screen_too_small\") ||\n    (is_fringe_browser() && \"fringe_browser\") ||\n    (is_too_many_visits() && \"too_many_visits\") ||\n    ((await ad_blocked()) && \"ad_blocked\") ||\n    (no_adsense_slots(AD_SLOTS) && \"no_adsense_slots\");\n\n  if (disable_reason) {\n    {\n      let value;\n      if (disable_reason === \"fringe_browser\") {\n        value = get_browser_name();\n      }\n      if (disable_reason === \"screen_too_small\") {\n        value = JSON.stringify(get_screen_size());\n      }\n      track_event({ name: \"[adsense] disabled: \" + disable_reason, value });\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction no_adsense_slots(AD_SLOTS) {\n  const adsense_slots = get_adsense_slots(AD_SLOTS);\n  return adsense_slots.length === 0;\n}\n\nfunction is_too_many_visits() {\n  if (get_number_of_visits_in_the_last_24_hours() >= 8) {\n    return true;\n  }\n  if (app_is_disabled()) {\n    assert(false);\n    return true;\n  }\n  return false;\n}\n\nfunction is_small_screen() {\n  const { width } = get_screen_size();\n  // Same as CSS media query\n  return width <= 700;\n}\n\nfunction get_screen_size() {\n  const { width, height } = window.screen;\n  assert(\n    Number.isInteger(width) &&\n      width > 0 &&\n      Number.isInteger(height) &&\n      height > 0,\n    { width, height }\n  );\n  return { width, height };\n}\n\nfunction is_fringe_browser() {\n  const browser_name = get_browser_name();\n  return ![\n    \"chrome\",\n    \"chromium\",\n    \"safari\",\n    \"firefox\",\n    \"internet explorer\",\n    \"opera\",\n    \"edge\",\n    \"microsoft edge\",\n  ].includes(browser_name.toLowerCase());\n}\n\nvar _ad_blocker_is_installed;\nfunction ad_blocker_detected() {\n  assert(!is_nodejs());\n\n  if (_ad_blocker_is_installed !== undefined) {\n    return _ad_blocker_is_installed;\n  }\n\n  const ad_blocker_test = document.createElement(\"div\");\n\n  // hide\n  ad_blocker_test.style.position = \"absolute\";\n  ad_blocker_test.style.visibility = \"hidden\";\n  ad_blocker_test.style.pointerEvents = \"none\";\n\n  ad_blocker_test.innerHTML = \"some_text\";\n\n  // Ad blockers hide elements with that class\n  ad_blocker_test.className = \"adsbygoogle\";\n\n  document.body.appendChild(ad_blocker_test);\n  _ad_blocker_is_installed = ad_blocker_test.offsetHeight === 0;\n  document.body.removeChild(ad_blocker_test);\n\n  return _ad_blocker_is_installed;\n}\n\nasync function ad_blocked() {\n  const success = await load_adsense_code();\n  assert([true, false].includes(success));\n  return !success;\n}\n\nfunction load_script(url, onload, onerror) {\n  const scriptEl = document.createElement(\"script\");\n  scriptEl.src = url;\n  scriptEl.async = true;\n  scriptEl.onload = onload;\n  scriptEl.onerror = onerror;\n  document.getElementsByTagName(\"head\")[0].appendChild(scriptEl);\n}\n\nfunction show_ads() {\n  document.documentElement.classList.add(\"show-ads\");\n}\nfunction hide_ads() {\n  document.documentElement.classList.remove(\"show-ads\");\n}\n\nfunction is_nodejs() {\n  return typeof window === \"undefined\";\n}\n","\"use strict\";\n\nimport { customAlphabet } from \"nanoid\";\nimport { store } from \"../store\";\nexport { get_tab_user_id };\nexport { init_tab_user_id };\nvar TAB_USER_ID = \"tab_user_uid\";\n\nfunction get_tab_user_id() {\n  init_tab_user_id();\n  var tab_user_id = store.get_val(TAB_USER_ID);\n  return tab_user_id;\n}\n\nfunction init_tab_user_id() {\n  if (!store.has_val(TAB_USER_ID)) {\n    store.set_val(TAB_USER_ID, generate_uid());\n  }\n}\n\nfunction generate_uid() {\n  var nanoid = customAlphabet(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\", 12);\n  var uid = nanoid(); //=> \"FwGcLB7eIzfy\"\n\n  return uid;\n}","\"use strict\";\n\nimport Bowser from \"bowser\";\nexport { get_browser_info };\nexport { get_browser_name };\n\nfunction get_browser_info() {\n  var spec = get_system_spec();\n  var os_version = spec.os.versionName || spec.os.version;\n  var browser_info = spec.browser.name + \" \" + spec.browser.version + \", \" + spec.os.name;\n\n  if (os_version) {\n    browser_info += \" \" + os_version;\n  }\n\n  return browser_info;\n}\n\nfunction get_browser_name() {\n  var spec = get_system_spec();\n  return spec.browser.name;\n}\n\nfunction get_system_spec() {\n  var spec = Bowser.parse(window.navigator.userAgent);\n  return spec;\n}","\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _classPrivateFieldLooseBase(receiver, privateKey) { if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) { throw new TypeError(\"attempted to use private field on non-instance\"); } return receiver; }\n\nvar id = 0;\n\nfunction _classPrivateFieldLooseKey(name) { return \"__private_\" + id++ + \"_\" + name; }\n\nimport assert from \"@brillout/assert\";\nimport JSON_S from \"@brillout/json-s\";\nvar localStorage_KEY = \"tab_storage\";\n\nvar KeyValueStore = /*#__PURE__*/function () {\n  function KeyValueStore() {\n    _classCallCheck(this, KeyValueStore);\n\n    Object.defineProperty(this, _listeners, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _store_data, {\n      writable: true,\n      value: null\n    });\n  }\n\n  _createClass(KeyValueStore, [{\n    key: \"has_val\",\n    value: function has_val(key) {\n      assert_key(key);\n      this.ensure_store();\n      return key in _classPrivateFieldLooseBase(this, _store_data)[_store_data];\n    }\n  }, {\n    key: \"get_val\",\n    value: function get_val(key) {\n      assert_key(key);\n      this.ensure_store();\n\n      var val = _classPrivateFieldLooseBase(this, _store_data)[_store_data][key];\n\n      val = make_copy(val);\n      return val;\n    }\n  }, {\n    key: \"set_val\",\n    value: function set_val(key, val) {\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref$is_passive = _ref.is_passive,\n          is_passive = _ref$is_passive === void 0 ? false : _ref$is_passive;\n\n      assert_key(key);\n      this.ensure_store();\n      val = make_copy(val);\n      _classPrivateFieldLooseBase(this, _store_data)[_store_data][key] = val;\n      this.save_store();\n\n      if (!is_passive) {\n        _classPrivateFieldLooseBase(this, _listeners)[_listeners].forEach(function (listener) {\n          return listener(key, val);\n        });\n      }\n    }\n  }, {\n    key: \"del_val\",\n    value: function del_val(key) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$is_passive = _ref2.is_passive,\n          is_passive = _ref2$is_passive === void 0 ? false : _ref2$is_passive;\n\n      if (!this.has_val(key)) return;\n      assert_key(key);\n      this.ensure_store();\n      delete _classPrivateFieldLooseBase(this, _store_data)[_store_data][key];\n      this.save_store();\n\n      if (!is_passive) {\n        _classPrivateFieldLooseBase(this, _listeners)[_listeners].forEach(function (listener) {\n          return listener(key, \"[deleted]\");\n        });\n      }\n    }\n  }, {\n    key: \"add_store_change_listener\",\n    value: function add_store_change_listener(listener) {\n      _classPrivateFieldLooseBase(this, _listeners)[_listeners].push(listener);\n    }\n  }, {\n    key: \"migrate__rename_keys\",\n    value: function migrate__rename_keys(key_rename_map) {\n      this.ensure_store();\n\n      for (var _key in key_rename_map) {\n        if (!(_key in _classPrivateFieldLooseBase(this, _store_data)[_store_data])) continue;\n\n        var val = _classPrivateFieldLooseBase(this, _store_data)[_store_data][_key];\n\n        delete _classPrivateFieldLooseBase(this, _store_data)[_store_data][_key];\n        var key__renamed = key_rename_map[_key];\n        _classPrivateFieldLooseBase(this, _store_data)[_store_data][key__renamed] = val;\n      }\n\n      this.save_store();\n    }\n  }, {\n    key: \"get_schema_version\",\n    value: function get_schema_version() {\n      this.ensure_store();\n      var schema_version = _classPrivateFieldLooseBase(this, _store_data)[_store_data][\"_schema_version\"] || new Date(\"1986\");\n      assert(schema_version.constructor === Date);\n      return schema_version;\n    }\n  }, {\n    key: \"set_schema_version\",\n    value: function set_schema_version(schema_version) {\n      assert(schema_version.constructor === Date);\n      this.ensure_store();\n      _classPrivateFieldLooseBase(this, _store_data)[_store_data][\"_schema_version\"] = schema_version;\n      this.save_store();\n    }\n  }, {\n    key: \"backup__dump\",\n    value: function backup__dump() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$readable = _ref3.readable,\n          readable = _ref3$readable === void 0 ? false : _ref3$readable;\n\n      this.ensure_store();\n      var data_string = this.get_storage_data_string();\n\n      if (readable) {\n        data_string = serialize(deserialize(data_string), {\n          readable: true\n        });\n      }\n\n      return data_string;\n    }\n  }, {\n    key: \"backup__restore\",\n    value: function backup__restore(data_string) {\n      console.log(data_string);\n\n      try {\n        deserialize(data_string);\n      } catch (err) {\n        throw err;\n      }\n\n      this.set_storage_data_string(data_string);\n    }\n  }, {\n    key: \"set_storage_data_string\",\n    value: function set_storage_data_string(data_string) {\n      window.localStorage.setItem(localStorage_KEY, data_string);\n    }\n  }, {\n    key: \"get_storage_data_string\",\n    value: function get_storage_data_string() {\n      var store__data_string = window.localStorage.getItem(localStorage_KEY);\n      assert(store__data_string === null || store__data_string.constructor === String);\n      return store__data_string;\n    }\n  }, {\n    key: \"load_store\",\n    value: function load_store() {\n      var store__data_string = this.get_storage_data_string();\n\n      if (store__data_string === null) {\n        _classPrivateFieldLooseBase(this, _store_data)[_store_data] = {};\n        return;\n      }\n\n      var store__data;\n\n      try {\n        store__data = deserialize(store__data_string);\n      } catch (err) {\n        assert(false, \"Couldn't parse store data string\", err);\n        throw err;\n      }\n\n      assert(store__data.constructor === Object);\n      _classPrivateFieldLooseBase(this, _store_data)[_store_data] = store__data;\n    }\n  }, {\n    key: \"ensure_store\",\n    value: function ensure_store() {\n      if (_classPrivateFieldLooseBase(this, _store_data)[_store_data] === null) {\n        this.load_store();\n      }\n\n      assert(_classPrivateFieldLooseBase(this, _store_data)[_store_data].constructor === Object);\n    }\n  }, {\n    key: \"save_store\",\n    value: function save_store() {\n      assert(_classPrivateFieldLooseBase(this, _store_data)[_store_data].constructor === Object);\n      var store__data_string = serialize(_classPrivateFieldLooseBase(this, _store_data)[_store_data]);\n      this.set_storage_data_string(store__data_string);\n      this.load_store();\n    }\n  }]);\n\n  return KeyValueStore;\n}();\n\nvar _listeners = _classPrivateFieldLooseKey(\"listeners\");\n\nvar _store_data = _classPrivateFieldLooseKey(\"store_data\");\n\nfunction assert_key(key) {\n  assert(key.constructor === String, {\n    key: key\n  });\n  assert(!key.startsWith(\"_\"), \"key `\" + key + \"` is reserved\");\n}\n\nfunction serialize(obj) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$readable = _ref4.readable,\n      readable = _ref4$readable === void 0 ? false : _ref4$readable;\n\n  if (readable) {\n    return JSON_S.stringify(obj, null, 2);\n  } else {\n    return JSON_S.stringify(obj);\n  }\n}\n\nfunction deserialize(str) {\n  return JSON_S.parse(str);\n} // We use `make_copy` to ensure that no outside code gets an object reference.\n// That way we ensure that no code outside of this module manipulates the store.\n\n\nfunction make_copy(val) {\n  var is_ref_val = is_referenced_value(val);\n\n  if (is_ref_val) {\n    return deserialize(serialize(val));\n  } else {\n    return val;\n  }\n}\n\nfunction is_referenced_value(val) {\n  if (val === null || val === undefined) {\n    return false;\n  } else if ([String, Date, Number, Boolean].includes(val.constructor)) {\n    return false;\n  } else if (val instanceof Object) {\n    return true;\n  }\n\n  assert_todo(false);\n  return true;\n}\n\nfunction assert_todo() {\n  assert.apply(void 0, arguments);\n}\n\nexport var store = new KeyValueStore();\nexport { serialize };\nexport { deserialize };","import React from \"react\";\nimport \"./header.css\";\nimport {\n  tab_app_name,\n  tab_app_logo,\n  tab_app_header_links,\n} from \"../../../tab_app_info\";\n\nexport default Header;\n\nfunction Header() {\n  return (\n    <div id=\"header-container\" className=\"glass-background\" click-name=\"header\">\n      <div id=\"header-content\">\n        <Logo />\n        {tab_app_header_links.map(\n          ({ link_name, link_url, link_target }, idx) => (\n            <Link href={link_url} target={link_target} key={idx}>\n              {link_name}\n            </Link>\n          )\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction Logo() {\n  return (\n    <a id=\"header-logo\" href=\"/\" click-name=\"header-logo\">\n      <img src={tab_app_logo} />\n      <h1>{tab_app_name}</h1>\n    </a>\n  );\n}\n\nfunction Link(props) {\n  return (\n    <a\n      className=\"header-link\"\n      click-name={\"header-link-\" + props.href}\n      {...props}\n    ></a>\n  );\n}\n","export default remove_hash;\n\nfunction remove_hash() {\n  // `window.location.hash = '';` doesn't remove leading `#` sign.\n  // See https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-url-with-javascript-without-page-r\n  window.history.pushState(\n    \"\",\n    document.title,\n    window.location.pathname + window.location.search\n  );\n}\n","import React from \"react\";\nimport \"./footer.css\";\nimport { tab_app_name, tab_app_source_code } from \"../../../tab_app_info\";\n\nexport default Footer;\n\nfunction Footer() {\n  return (\n    <Container>\n      <Section>\n        <Header>Support</Header>\n\n        <Link href=\"/repair\">Bug Repair</Link>\n        <Link href=\"/suggest\">Suggest a Feature</Link>\n        <Link href=\"/support\">Get help & support</Link>\n      </Section>\n\n      <Section>\n        <Header>Get Involved</Header>\n\n        <Link href=\"/donate\">Donate</Link>\n        <Link href=\"/contribute\">Contribute</Link>\n      </Section>\n\n      <Section>\n        <Header>{tab_app_name}</Header>\n\n        <Link href=\"/roadmap\">Roadmap</Link>\n        <Link href={tab_app_source_code} target=\"_blank\">\n          Source Code\n        </Link>\n        <Link href=\"/contact\">Contact</Link>\n        <Link href=\"/about\">About</Link>\n      </Section>\n\n      <Section>\n        <Header>Legal & conduct</Header>\n\n        <Link href=\"/conduct\">Code of Conduct</Link>\n        <Link href=\"/terms\">Terms of Service</Link>\n        <Link href=\"/privacy-policy\">Privacy Policy</Link>\n      </Section>\n    </Container>\n  );\n}\n/*\n        <Link href=\"/new-features\">New Features</Link>\n        <Link href=\"/donate\">Remove Ads</Link>\n        <Link href=\"/discussion\">Discussions & questions</Link>\n        <Link href=\"/timer-tab\">Timer Tab</Link>\n        <Link href=\"/author\">Author</Link>\n*/\n\nfunction Container({ children }) {\n  return <div id=\"footer_container\">{children}</div>;\n}\n\nfunction Section({ children }) {\n  return <div className=\"footer_section\">{children}</div>;\n}\n\nfunction Header({ children }) {\n  return (\n    <h4\n      className=\"footer-section-title\"\n      style={{\n        marginBottom: 7,\n        fontWeight: \"normal\",\n      }}\n    >\n      {children}\n    </h4>\n  );\n}\n\nfunction Link(props) {\n  return (\n    <a\n      style={{\n        display: \"block\",\n        textDecoration: \"none\",\n        color: \"inherit\",\n      }}\n      click-name={\"footer-link-\" + props.href}\n      {...props}\n    />\n  );\n}\n","\"use strict\";\n\nexport { sleep };\n\nfunction sleep(_ref) {\n  var seconds = _ref.seconds,\n      milliseconds = _ref.milliseconds;\n  milliseconds = milliseconds || seconds * 1000;\n  return new Promise(function (resolve) {\n    return window.setTimeout(function () {\n      resolve();\n    }, milliseconds);\n  });\n}","\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport assert from \"@brillout/assert\";\nimport { store } from \"../store\";\nimport { get_number_of_visits_in_the_last_24_hours, track_event } from \"../views/common/tracker\";\nimport { get_tab_user_id } from \"./TabUserId\";\nimport { sleep } from \"../sleep\";\nimport { user_donated } from \"../load_ad\";\nexport { disable_problematic_users };\nexport { app_is_disabled };\nvar APP_IS_DISABLED = \"app_is_disabled\";\n\nfunction disable_problematic_users() {\n  assert(is_browser());\n\n  if (user_donated()) {\n    store.del_val(APP_IS_DISABLED);\n    return;\n  }\n\n  check_and_kill_if_disabled();\n}\n\nfunction set_disable_flag() {\n  return _set_disable_flag.apply(this, arguments);\n}\n\nfunction _set_disable_flag() {\n  _set_disable_flag = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var tab_user_id;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (store.has_val(APP_IS_DISABLED)) {\n              _context.next = 6;\n              break;\n            }\n\n            tab_user_id = get_tab_user_id();\n            track_event({\n              name: \"app_is_disabled\",\n              value: tab_user_id\n            });\n            store.set_val(APP_IS_DISABLED, true);\n            _context.next = 6;\n            return sleep({\n              seconds: 1\n            });\n\n          case 6:\n            kill_app();\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _set_disable_flag.apply(this, arguments);\n}\n\nfunction check_and_kill_if_disabled() {\n  if (app_is_disabled()) {\n    kill_app();\n  } else {\n    disable_if_aggressive_autoreload_user();\n  }\n}\n\nfunction kill_app() {\n  var TARGET_PAGE = \"/contact\";\n  if (is_dev()) return;\n  if ([TARGET_PAGE, \"/repair\"].includes(window.location.pathname)) return;\n  alert(\"You have been deactivated. Please contact Romuald, he will let you know why, and how to solve the problem.\");\n  window.location.pathname = TARGET_PAGE;\n}\n\nfunction app_is_disabled() {\n  var app_is_disabled = store.get_val(APP_IS_DISABLED);\n  assert([true, undefined].includes(app_is_disabled), {\n    app_is_disabled: app_is_disabled\n  });\n  return app_is_disabled;\n}\n\nfunction is_browser() {\n  return typeof window !== \"undefined\";\n}\n\nfunction disable_if_aggressive_autoreload_user() {\n  if (get_number_of_visits_in_the_last_24_hours() >= 50) {\n    set_disable_flag();\n  }\n}\n\nfunction is_dev() {\n  return typeof window !== \"undefined\" && window.location.hostname === \"localhost\";\n}","import { tab_app_mail } from \"../../../tab_app_info\";\n\nexport default activate_email_links;\n\nfunction activate_email_links() {\n  Array.from(document.querySelectorAll(\"a.contact-address\")).forEach((link) => {\n    link.innerHTML = link.innerHTML || tab_app_mail;\n    link.setAttribute(\"target\", \"_blank\");\n    link.setAttribute(\"href\", getHref(link));\n  });\n}\n\nfunction getHref(link) {\n  let href = \"mailto:\" + tab_app_mail;\n  const data_subject = link.getAttribute(\"data-subject\");\n  const data_body = link.getAttribute(\"data-body\");\n\n  if (!data_subject && !data_body) {\n    return href;\n  }\n\n  href += \"?\";\n\n  if (data_subject) {\n    href += \"subject=\" + encodeURIComponent(data_subject);\n    if (data_body) {\n      href += \"&\";\n    }\n  }\n\n  if (data_body) {\n    href += \"body=\" + encodeURIComponent(data_body);\n  }\n\n  return href;\n}\n","export default activate_app;\n\nfunction activate_app() {\n  document.documentElement.classList.remove(\"hideApp\");\n}\n","export default init_wake_lock;\n\n/*/\nconst DEBUG = true;\n/*/\nconst DEBUG = false;\n//*/\n\nfunction init_wake_lock() {\n  call_wake_lock();\n  on_page_focus(call_wake_lock);\n}\n\nasync function call_wake_lock() {\n  let wakeLock;\n  try {\n    wakeLock = await navigator.wakeLock.request(\"screen\");\n  } catch (e) {}\n  if (!wakeLock) {\n    DEBUG && console.log(\"[Wake Lock] Not available\");\n    return;\n  }\n  wakeLock.addEventListener(\"release\", () => {\n    DEBUG && console.log(\"[Wake Lock] Released\");\n  });\n  DEBUG && console.log(\"[Wake Lock] Active\");\n}\n\nfunction on_page_focus(listener) {\n  document.addEventListener(\"visibilitychange\", function () {\n    if (document.visibilityState === \"visible\") {\n      listener();\n    }\n  });\n}\n","import \"./common.css\";\nimport activate_email_links from \"./activate_email_links\";\nimport activate_app from \"./activate_app\";\nimport { load_google_analytics } from \"./tracker\";\nimport init_wake_lock from \"./init_wake_lock\";\nimport { disable_problematic_users } from \"../../utils/disable_problematic_users\";\n\nexport default load_common;\n\nfunction load_common() {\n  activate_email_links();\n\n  activate_app();\n\n  try {\n    init_wake_lock();\n  } catch (e) {}\n\n  load_google_analytics();\n\n  disable_problematic_users();\n}\n","\"use strict\";\n\nimport assert from \"@brillout/assert\";\nvar DEPLOY_ID = \"1EpJB76n\";\nexport { get_deploy_id };\n\nfunction get_deploy_id() {\n  // In order to ensure source mapping, we ensure that the placeholder\n  // string got replaced with a same-sized ID string.\n  assert(DEPLOY_ID.length === 8);\n  return DEPLOY_ID;\n}"],"sourceRoot":""}